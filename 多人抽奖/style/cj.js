/*承接建站 270168164*/

var xinm = new Array();
var phone = new Array();


xinm[0]="李海林"
xinm[1]="范彦"
xinm[2]="陈静"
xinm[3]="张悦"
xinm[4]="王虹"
xinm[5]="孙德志"
xinm[6]="郝丽娜"
xinm[7]="高振东"
xinm[8]="陆雯"
xinm[9]="满宇娇"
xinm[10]="王玉妹"
xinm[11]="管海燕"
xinm[12]="郭凯华"
xinm[13]="李国友"
xinm[14]="陆建兵"
xinm[15]="张军"
xinm[16]="施忠美"
xinm[17]="高红"
xinm[18]="张永斌"
xinm[19]="张德飞"
xinm[20]="魏秋凤"
xinm[21]="朱虎兰"
xinm[22]="游桂芳"
xinm[23]="张加贝"
xinm[24]="施海燕（后勤）"
xinm[25]="施娟(宿管）"
xinm[26]="沈渊"
xinm[27]="顾健"
xinm[28]="高探"
xinm[29]="裴雨星"
xinm[30]="董筝"
xinm[31]="张慧（国际部）"
xinm[32]="周杰"
xinm[33]="沈才采"
xinm[34]="符娟"
xinm[35]="史雪"
xinm[36]="李明丽"
xinm[37]="孙新贵"
xinm[38]="杨政"
xinm[39]="谢林轩"
xinm[40]="周治军"
xinm[41]="钱绮"
xinm[42]="代凤云"
xinm[43]="欧春梅"
xinm[44]="董丽楠"
xinm[45]="吴玉如"
xinm[46]="张云美"
xinm[47]="张永平"
xinm[48]="樊红菊"
xinm[49]="张品琴"
xinm[50]="陆瑞娟"
xinm[51]="沈晓燚"
xinm[52]="黄锐洁"
xinm[53]="吴金花"
xinm[54]="高芳"
xinm[55]="陈燕"
xinm[56]="施静"
xinm[57]="陆彩娟"
xinm[58]="陈必升"
xinm[59]="章勇"
xinm[60]="李勤"
xinm[61]="Nicole"
xinm[62]="Jessica"
xinm[63]="刘洋"
xinm[64]="顾安昌"
xinm[65]="章广霞"
xinm[66]="蓝翠婷"
xinm[67]="蓝美凤"
xinm[68]="龚丽"
xinm[69]="宋丹"
xinm[70]="黄锦欢"
xinm[71]="王佩娟"
xinm[72]="陆英"
xinm[73]="王雪兰"
xinm[74]="范春花"
xinm[75]="施娟（后勤）"
xinm[76]="丁亚美"
xinm[77]="陆丽萍"
xinm[78]="闻学挺"
xinm[79]="张柳"
xinm[80]="田妮鸽"
xinm[81]="吴娟"
xinm[82]="夏芝梅"
xinm[83]="陆绒娣"
xinm[84]="王汉石"
xinm[85]="李颖"
xinm[86]="董佳宁"
xinm[87]="李奇洪"
xinm[88]="陈志剑"
xinm[89]="赵日清"
xinm[90]="陈沁"
xinm[91]="丁红军"
xinm[92]="李望军"
xinm[93]="陈娟"
xinm[94]="施海燕（宿管）"
xinm[95]="梅赛明"
xinm[96]="黄婉香"
xinm[97]="许顺荣"
xinm[98]="吴勉涛"
xinm[99]="李万红"
xinm[100]="牟小宇"
xinm[101]="郭芳"
xinm[102]="范佐仪"
xinm[103]="乐忠东"
xinm[104]="王甜"
xinm[105]="胡明泉"
xinm[106]="李婷婷"
xinm[107]="蔡芝武"
xinm[108]="叶红"
xinm[109]="王静逸"
xinm[110]="谷婧榕"
xinm[111]="左晓琴"
xinm[112]="丁伯文"
xinm[113]="王青青"
xinm[114]="栗栋"
xinm[115]="谭建英"
xinm[116]="陈蓉蓉"
xinm[117]="刘云峰"
xinm[118]="贡丹宜"
xinm[119]="张雨"
xinm[120]="商韬"
xinm[121]="王长岳"
xinm[122]="姚渊"
xinm[123]="纪露海"
xinm[124]="姜姝君"
xinm[125]="沈姝"
xinm[126]="黄玲莉"
xinm[127]="李小康"
xinm[128]="陈列平"
xinm[129]="吴菊"
xinm[130]="汤美菊"
xinm[131]="Alexandra"
xinm[132]="Elizabeth"
xinm[133]="Joleen"
xinm[134]="Joseph"
xinm[135]="Madeline"
xinm[136]="Margaretha"
xinm[137]="Roxana"
xinm[138]="Shanna"
xinm[139]="Stephen"
xinm[140]="Weslan"
xinm[141]="崔莹"
xinm[142]="单帅"
xinm[143]="刘素芳"
xinm[144]="陈婕"
xinm[145]="张瑜"
xinm[146]="陆丽娥"
xinm[147]="黄玉英"
xinm[148]="茅红美"
xinm[149]="章寒"
xinm[150]="黄玲"
xinm[151]="闫长青"
xinm[152]="王伟群"
xinm[153]="潘金花"
xinm[154]="严佩"
xinm[155]="陈秀芳"
xinm[156]="施全春"
xinm[157]="余松涛"
xinm[158]="张慧（后勤）"
xinm[159]="于中连"
xinm[160]="王铮"
xinm[161]="秦文旭"
xinm[162]="王建平"
xinm[163]="陆培"
xinm[164]="陆荷佩"
xinm[165]="施芳"
xinm[166]="朱代丽"
xinm[167]="宋金金"
xinm[168]="王梦"
xinm[169]="周益斌"
xinm[170]="朱松松"
xinm[171]="张伟"
xinm[172]="施凯华"
xinm[173]="食堂主管"

phone[0]="************"
phone[1]="************"
phone[2]="************"
phone[3]="************"
phone[4]="************"
phone[5]="************"
phone[6]="************"
phone[7]="************"
phone[8]="************"
phone[9]="************"
phone[10]="************"
phone[11]="************"
phone[12]="************"
phone[13]="************"
phone[14]="************"
phone[15]="************"
phone[16]="************"
phone[17]="************"
phone[18]="************"
phone[19]="************"
phone[20]="************"
phone[21]="************"
phone[22]="************"
phone[23]="************"
phone[24]="************"
phone[25]="************"
phone[26]="************"
phone[27]="************"
phone[28]="************"
phone[29]="************"
phone[30]="************"
phone[31]="************"
phone[32]="************"
phone[33]="************"
phone[34]="************"
phone[35]="************"
phone[36]="************"
phone[37]="************"
phone[38]="************"
phone[39]="************"
phone[40]="************"
phone[41]="************"
phone[42]="************"
phone[43]="************"
phone[44]="************"
phone[45]="************"
phone[46]="************"
phone[47]="************"
phone[48]="************"
phone[49]="************"
phone[50]="************"
phone[51]="************"
phone[52]="************"
phone[53]="************"
phone[54]="************"
phone[55]="************"
phone[56]="************"
phone[57]="************"
phone[58]="************"
phone[59]="************"
phone[60]="************"
phone[61]="************"
phone[62]="************"
phone[63]="************"
phone[64]="************"
phone[65]="************"
phone[66]="************"
phone[67]="************"
phone[68]="************"
phone[69]="************"
phone[70]="************"
phone[71]="************"
phone[72]="************"
phone[73]="************"
phone[74]="************"
phone[75]="************"
phone[76]="************"
phone[77]="************"
phone[78]="************"
phone[79]="************"
phone[80]="************"
phone[81]="************"
phone[82]="************"
phone[83]="************"
phone[84]="************"
phone[85]="************"
phone[86]="************"
phone[87]="************"
phone[88]="************"
phone[89]="************"
phone[90]="************"
phone[91]="************"
phone[92]="************"
phone[93]="************"
phone[94]="************"
phone[95]="************"
phone[96]="************"
phone[97]="************"
phone[98]="************"
phone[99]="************"
phone[100]="************"
phone[101]="************"
phone[102]="************"
phone[103]="************"
phone[104]="************"
phone[105]="************"
phone[106]="************"
phone[107]="************"
phone[108]="************"
phone[109]="************"
phone[110]="************"
phone[111]="************"
phone[112]="************"
phone[113]="************"
phone[114]="************"
phone[115]="************"
phone[116]="************"
phone[117]="************"
phone[118]="************"
phone[119]="************"
phone[120]="************"
phone[121]="************"
phone[122]="************"
phone[123]="************"
phone[124]="************"
phone[125]="************"
phone[126]="************"
phone[127]="************"
phone[128]="************"
phone[129]="************"
phone[130]="************"
phone[131]="************"
phone[132]="************"
phone[133]="************"
phone[134]="************"
phone[135]="************"
phone[136]="************"
phone[137]="************"
phone[138]="************"
phone[139]="************"
phone[140]="************"
phone[141]="************"
phone[142]="************"
phone[143]="************"
phone[144]="************"
phone[145]="************"
phone[146]="************"
phone[147]="************"
phone[148]="************"
phone[149]="************"
phone[150]="************"
phone[151]="************"
phone[152]="************"
phone[153]="************"
phone[154]="************"
phone[155]="************"
phone[156]="************"
phone[157]="************"
phone[158]="************"
phone[159]="************"
phone[160]="************"
phone[161]="************"
phone[162]="************"
phone[163]="************"
phone[164]="************"
phone[165]="************"
phone[166]="************"
phone[167]="************"
phone[168]="************"
phone[169]="************"
phone[170]="************"
phone[171]="************"
phone[172]="************"
phone[173]="************"


var nametxt = $('.name');
var phonetxt = $('.phone');
var pcount = xinm.length;//参加人数
var runing = true;  
var num = 0; //随机数存储
var to = 0;//从0开始
var numr = 10;//每次抽取幸运奖人数
var t;//循环调用
var lucknum = 0;

var pdnum = pcount;//参加人数判断是否抽取完


//大奖开始停止
function start() {
	var zjnum = $('.list').find('p');
	if(zjnum.length == pdnum){
		alert('无法抽奖');
	}else{
		if (runing) {
			runing = false;
			$('#btntxt').removeClass('start').addClass('stop');
			$('#btntxt').html('停止');
			startNum();
		} else {
			runing = true;
			$('#btntxt').removeClass('stop').addClass('start');
			$('#btntxt').html('抽奖');
			stop();
	        bzd();//中奖函数
	        $('#btnqx').css('display','block');
	        $('.lucknum').css('display','none');
	    }
	}
}

// 幸运奖开始停止
function luck(){
	if(runing){
		runing = false;
		$('#btnluck').removeClass('start').addClass('stop');
		$('#btnluck').html('停止');
		startNum();
	}else{
		runing = true;
		$('#btnluck').removeClass('stop').addClass('start');
		$('#btnluck').html('幸运奖');
		stop();
		luck2();
		dl();
	}
	if(!$('#btnqr').hasClass('xn')){
		$('#btnqr').addClass('xn');
	}
	$('#btnqx').css('display','none');
	$('.lucknum').css('display','block');
}
//循环参加名单
function startNum() {
	pcount = xinm.length;
	num = Math.floor(Math.random() * pcount);
	nametxt.html(xinm[num]);
	//phonetxt.html(phone[num]);
	t = setTimeout(startNum, 0);
}
//停止跳动
function stop() {
	clearInterval(t);
	t = 0;
	return pcount;
}
//打印中奖名单
function bzd() {
	pcount = xinm.length;
	//获取中奖人数
	var zjnum = $('.list').find('p');
	//打印中奖者名单
	$('.conbox').prepend("<p style='width:80%;font-size:38px;padding:30px;text-align: center;color:#FF2525;'>"+xinm[num]+"</p>");
	$('.confirmbox').show();
	//将已中奖者从数组中"删除",防止二次中奖
	xinm.splice($.inArray(xinm[num], xinm), 1);
	//phone.splice($.inArray(phone[num], phone), 1);
	
	return pcount;
}
//幸运奖循环
function luck2(){
	var arr=[];
    var json={};
    pcount = xinm.length;
    if(pcount < numr){
    	alert('无法抽奖');
    }else{
	    //循环随机数10次
	    for(var i = 0;arr.length<numr;i++){
	    	//产生单个随机数
            var ranNum = Math.floor(Math.random()*pcount);
            //通过判断json对象的索引值是否存在 来标记 是否重复
            if(!json[ranNum]){
                json[ranNum]=1;
                arr.push(ranNum);
            }
        }
    }
    //打印幸运奖名单,每次10名
    $.each(arr,function(i){
    	$('.conbox').prepend("<p>"+xinm[arr[i]]+"</p>");
    	$('.name').html(xinm[arr[i]]);
    	$('.phone').html(phone[arr[i]]);
    	$('.confirmbox').show();

    	delete xinm[arr[i]];
    	delete phone[arr[i]];
    })
    //替换循环停止人名
    $.each(arr,function(z,val){
    	if(z == 9){
    		nametxt.html(xinm[arr[9]]);
			phonetxt.html(phone[arr[9]]);
    	}
    })      
    pcount = xinm.length;
	return pcount;

}

//删除幸运奖中奖
function dl(){
	var testn = [];
	var testp = [];
	$.each(xinm,function(i,vl){
		if(typeof(xinm[i]) != 'undefined'){
			testn.push(xinm[i]);
			testp.push(phone[i]);
		}
	})
	xinm.splice(0,xinm.length);
	phone.splice(0,phone.length);
	xinm = xinm.concat(testn);
	phone = phone.concat(testp);
}
//确认
$('#btnqr').on('click',function(){

	var cp = $('.conbox').find('p').removeAttr('style').clone();
	$('.zjmd_bt_xy').find('p').eq(0).css({'margin-top':'10px','border-top':'1px solid #FF2525'});
	$('.zjmd_bt_xy').prepend(cp);
	$('.conbox').empty();
	$('.confirmbox').hide();
	//中奖名单排序
	$('.list').find('p').each(function(i){
		$(this).find('span').remove();
	})
})

//取消
$('#btnqx').on('click',function(){
	$('.conbox').empty();
	$('.confirmbox').hide();
})












